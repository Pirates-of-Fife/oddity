[gd_scene load_steps=43 format=3 uid="uid://cr8ergd0avfvd"]

[ext_resource type="Script" path="res://classes/world/World.gd" id="1_dg08i"]
[ext_resource type="Script" path="res://test-scenes/multiplayer-scene/MultiplayerScene.gd" id="1_trc7v"]
[ext_resource type="PackedScene" uid="uid://c3ry8dgeqrhg1" path="res://classes/player/player.tscn" id="2_gslaq"]
[ext_resource type="Shader" path="res://shaders/skybox-shader/star-shader.gdshader" id="2_o68hd"]
[ext_resource type="PackedScene" uid="uid://ik0bqvjr0uki" path="res://classes/creature/Creature.tscn" id="3_g2vwh"]
[ext_resource type="Script" path="res://classes/frame-of-reference/GravityGrid.gd" id="3_i0foj"]
[ext_resource type="PackedScene" uid="uid://cl1lyeabmrdst" path="res://scenes/vehicles/starships/demo-ship-2/DemoShip2.tscn" id="5_dvi61"]
[ext_resource type="Script" path="res://classes/game-entity/static-game-entity/StaticGameEntity.gd" id="6_5wpdq"]
[ext_resource type="PackedScene" uid="uid://b2tfu5br2gx5u" path="res://test-scenes/multiplayer-scene/ring.tscn" id="8_6rxcf"]
[ext_resource type="Script" path="res://test-scenes/multiplayer-scene/ring.gd" id="9_w6qws"]
[ext_resource type="Script" path="res://test-scenes/multiplayer-scene/asteroids_spawn.gd" id="10_vlrb4"]
[ext_resource type="PackedScene" uid="uid://ceilc28yahn5i" path="res://test-scenes/multiplayer-scene/Asteroids/Asteroid-Assets/Asteroid1.tscn" id="11_4cfhx"]
[ext_resource type="PackedScene" uid="uid://clic1klo04v3l" path="res://test-scenes/multiplayer-scene/Asteroids/Asteroid-Assets/Asteroid2.tscn" id="12_n06nr"]
[ext_resource type="PackedScene" uid="uid://dhbnisnk21ada" path="res://test-scenes/multiplayer-scene/Asteroids/Asteroid-Assets/Asteroid3.tscn" id="13_x2yie"]
[ext_resource type="PackedScene" uid="uid://crexu7ilx05ue" path="res://test-scenes/multiplayer-scene/Asteroids/Asteroid-Assets/Asteroid4.tscn" id="14_m0s8b"]
[ext_resource type="PackedScene" uid="uid://dpe4l1tp220ro" path="res://test-scenes/multiplayer-scene/Asteroids/Asteroid-Assets/Asteroid5.tscn" id="15_x73sd"]

[sub_resource type="BoxMesh" id="BoxMesh_yu3m8"]
size = Vector3(30, 2, 30)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5p1x6"]
albedo_color = Color(1, 0.592157, 0.329412, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_6pfog"]
data = PackedVector3Array(-15, 1, 15, 15, 1, 15, -15, -1, 15, 15, 1, 15, 15, -1, 15, -15, -1, 15, 15, 1, -15, -15, 1, -15, 15, -1, -15, -15, 1, -15, -15, -1, -15, 15, -1, -15, 15, 1, 15, 15, 1, -15, 15, -1, 15, 15, 1, -15, 15, -1, -15, 15, -1, 15, -15, 1, -15, -15, 1, 15, -15, -1, -15, -15, 1, 15, -15, -1, 15, -15, -1, -15, 15, 1, 15, -15, 1, 15, 15, 1, -15, -15, 1, 15, -15, 1, -15, 15, 1, -15, -15, -1, 15, 15, -1, 15, -15, -1, -15, 15, -1, 15, 15, -1, -15, -15, -1, -15)

[sub_resource type="BoxShape3D" id="BoxShape3D_n55jf"]
size = Vector3(30, 30, 30)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pjo3f"]
albedo_color = Color(0.184314, 1, 0.356863, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lv6e5"]
albedo_color = Color(1, 0.415686, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fa6l5"]
albedo_color = Color(0.372549, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_pof18"]
colors = PackedColorArray(0, 0, 1, 1, 0.635294, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_27q8k"]
gradient = SubResource("Gradient_pof18")

[sub_resource type="Gradient" id="Gradient_lm1bv"]
colors = PackedColorArray(6.16074e-06, 0.945985, 0.995135, 1, 0.0222028, 1.20327e-08, 0.267445, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_p03o6"]
gradient = SubResource("Gradient_lm1bv")

[sub_resource type="Curve" id="Curve_03tv2"]
max_value = 16.0
_data = [Vector2(0, 16), 0.0, 0.0, 0, 0, Vector2(1, 11.4286), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_s4i46"]
curve = SubResource("Curve_03tv2")

[sub_resource type="Curve" id="Curve_313e0"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_syxri"]
curve = SubResource("Curve_313e0")

[sub_resource type="Curve" id="Curve_82248"]
max_value = 3.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.630303, 1.61538), 0.0, 0.0, 0, 0, Vector2(1, 1.21978), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_mj3xa"]
curve = SubResource("Curve_82248")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_f38pw"]
emission_shape_scale = Vector3(30, 30, 16.56)
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = 1.0
emission_ring_radius = 1.0
emission_ring_inner_radius = 0.0
angle_min = -720.0
angle_max = 720.0
spread = 180.0
angular_velocity_min = -1.60933e-05
angular_velocity_max = 458.51
orbit_velocity_min = 9.49949e-08
orbit_velocity_max = 2.0
radial_velocity_min = -50000.0
radial_velocity_max = -905.53
radial_velocity_curve = SubResource("CurveTexture_syxri")
gravity = Vector3(0, 0, 0)
scale_min = 2.0
scale_max = 6.0
scale_over_velocity_max = 3.0
scale_over_velocity_curve = SubResource("CurveTexture_mj3xa")
color = Color(0, 1, 1, 1)
color_ramp = SubResource("GradientTexture1D_p03o6")
color_initial_ramp = SubResource("GradientTexture1D_27q8k")
emission_curve = SubResource("CurveTexture_s4i46")
hue_variation_min = -0.01
hue_variation_max = 0.00999998
turbulence_noise_strength = 12.37
turbulence_noise_scale = 7.376
turbulence_noise_speed = Vector3(0, 12.445, 0)
turbulence_noise_speed_random = 4.0
turbulence_influence_min = 0.368
turbulence_influence_max = 0.917

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xupnd"]
vertex_color_use_as_albedo = true
emission = Color(0, 1, 1, 1)

[sub_resource type="BoxMesh" id="BoxMesh_a4jyr"]
material = SubResource("StandardMaterial3D_xupnd")
size = Vector3(2, 2, 2)

[sub_resource type="CylinderMesh" id="CylinderMesh_a0sra"]
top_radius = 30.0
bottom_radius = 30.0
height = 0.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vpsh7"]
albedo_color = Color(0, 0.909804, 1, 1)
emission_enabled = true
emission = Color(0.141176, 0.784314, 1, 1)
emission_energy_multiplier = 16.0
distance_fade_mode = 2
distance_fade_min_distance = 100.0
distance_fade_max_distance = 350.0

[sub_resource type="BoxShape3D" id="BoxShape3D_3gx43"]
size = Vector3(19.635, 51.365, 51.935)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_mchba"]
shader = ExtResource("2_o68hd")
shader_parameter/sky_color = Color(0, 0, 0, 1)
shader_parameter/star_base_color = Color(1, 0.618134, 0.739678, 1)
shader_parameter/star_hue_offset = 0.918
shader_parameter/star_intensity = 0.149
shader_parameter/star_twinkle_speed = 0.627
shader_parameter/star_twinkle_intensity = 0.138
shader_parameter/layer_scale = 48.889
shader_parameter/layer_scale_step = 6.049
shader_parameter/layers_count = 3

[sub_resource type="Sky" id="Sky_hoxdb"]
sky_material = SubResource("ShaderMaterial_mchba")

[sub_resource type="Environment" id="Environment_e0213"]
background_mode = 2
sky = SubResource("Sky_hoxdb")

[node name="Multiplayer" type="Node3D"]
script = ExtResource("1_trc7v")
player_scene = ExtResource("2_gslaq")
creature_scene = ExtResource("3_g2vwh")
ship_scnee = ExtResource("5_dvi61")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
stretch = true
stretch_shrink = 3
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(640, 360)
render_target_update_mode = 4

[node name="World" type="Node3D" parent="SubViewportContainer/SubViewport" groups=["World"]]
script = ExtResource("1_dg08i")

[node name="SpawnPoints" type="Node3D" parent="SubViewportContainer/SubViewport/World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.42129, 8.19868, 0)

[node name="0" type="Marker3D" parent="SubViewportContainer/SubViewport/World/SpawnPoints" groups=["PlayerSpawnPoint"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 133.551, 0, -0.0878256)
gizmo_extents = 10.0

[node name="1" type="Marker3D" parent="SubViewportContainer/SubViewport/World/SpawnPoints" groups=["PlayerSpawnPoint"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.7354, 0, -91.2105)
gizmo_extents = 10.0

[node name="2" type="Marker3D" parent="SubViewportContainer/SubViewport/World/SpawnPoints" groups=["PlayerSpawnPoint"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -182.569, 0, 0)
gizmo_extents = 10.0

[node name="3" type="Marker3D" parent="SubViewportContainer/SubViewport/World/SpawnPoints" groups=["PlayerSpawnPoint"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.11958, 0, 129.77)
gizmo_extents = 10.0

[node name="SpawnStation" type="Node3D" parent="SubViewportContainer/SubViewport/World"]

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/World/SpawnStation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -187.626, 0, 0)
collision_layer = 3
script = ExtResource("6_5wpdq")
ignore_collision_damage = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D"]
mesh = SubResource("BoxMesh_yu3m8")
surface_material_override/0 = SubResource("StandardMaterial3D_5p1x6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_6pfog")

[node name="GravityGrid" type="Area3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D"]
script = ExtResource("3_i0foj")
frame_of_reference_name = "Spawn"
size = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D/GravityGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.0168, 0)
shape = SubResource("BoxShape3D_n55jf")

[node name="StaticBody3D2" type="StaticBody3D" parent="SubViewportContainer/SubViewport/World/SpawnStation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20.8585, 0, -90.4587)
collision_layer = 3
script = ExtResource("6_5wpdq")
ignore_collision_damage = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D2"]
mesh = SubResource("BoxMesh_yu3m8")
surface_material_override/0 = SubResource("StandardMaterial3D_pjo3f")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D2"]
shape = SubResource("ConcavePolygonShape3D_6pfog")

[node name="GravityGrid" type="Area3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D2"]
script = ExtResource("3_i0foj")
frame_of_reference_name = "Spawn"
size = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D2/GravityGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.0168, 0)
shape = SubResource("BoxShape3D_n55jf")

[node name="StaticBody3D3" type="StaticBody3D" parent="SubViewportContainer/SubViewport/World/SpawnStation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 129.859)
collision_layer = 3
script = ExtResource("6_5wpdq")
ignore_collision_damage = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D3"]
mesh = SubResource("BoxMesh_yu3m8")
surface_material_override/0 = SubResource("StandardMaterial3D_lv6e5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D3"]
shape = SubResource("ConcavePolygonShape3D_6pfog")

[node name="GravityGrid" type="Area3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D3"]
script = ExtResource("3_i0foj")
frame_of_reference_name = "Spawn"
size = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D3/GravityGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.0168, 0)
shape = SubResource("BoxShape3D_n55jf")

[node name="StaticBody3D4" type="StaticBody3D" parent="SubViewportContainer/SubViewport/World/SpawnStation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 126.554, 0, 0)
collision_layer = 3
script = ExtResource("6_5wpdq")
ignore_collision_damage = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D4"]
mesh = SubResource("BoxMesh_yu3m8")
surface_material_override/0 = SubResource("StandardMaterial3D_fa6l5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D4"]
shape = SubResource("ConcavePolygonShape3D_6pfog")

[node name="GravityGrid" type="Area3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D4"]
script = ExtResource("3_i0foj")
frame_of_reference_name = "Spawn"
size = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/SpawnStation/StaticBody3D4/GravityGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.0168, 0)
shape = SubResource("BoxShape3D_n55jf")

[node name="ring" parent="SubViewportContainer/SubViewport/World" instance=ExtResource("8_6rxcf")]
transform = Transform3D(9.78893, 0, 6.94096, 0, 12, 0, -6.94096, 0, 9.78893, 2026.87, 140.556, -1065.28)
script = ExtResource("9_w6qws")

[node name="GPUParticles3D" type="GPUParticles3D" parent="SubViewportContainer/SubViewport/World/ring"]
transform = Transform3D(0.00380481, 0, 0.999993, 0, 1, 0, -0.999993, 0, 0.00380481, 0, 0, 0)
amount = 60000
lifetime = 10.57
randomness = 0.75
visibility_aabb = AABB(-40, -37.3, -28.245, 71.615, 76.68, 67.285)
process_material = SubResource("ParticleProcessMaterial_f38pw")
draw_pass_1 = SubResource("BoxMesh_a4jyr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/World/ring"]
transform = Transform3D(0.00287086, -0.997168, -0.0751499, 0.577263, 0.063017, -0.814123, 0.816553, -0.0410441, 0.57581, 0.96511, 0, 0.684323)
mesh = SubResource("CylinderMesh_a0sra")
surface_material_override/0 = SubResource("StandardMaterial3D_vpsh7")

[node name="Area3D" type="Area3D" parent="SubViewportContainer/SubViewport/World/ring"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/World/ring/Area3D"]
shape = SubResource("BoxShape3D_3gx43")

[node name="Asteroids" type="Node3D" parent="SubViewportContainer/SubViewport/World"]
script = ExtResource("10_vlrb4")
asteroid_1 = ExtResource("11_4cfhx")
asteroid_2 = ExtResource("12_n06nr")
asteroid_3 = ExtResource("13_x2yie")
asteroid_4 = ExtResource("14_m0s8b")
asteroid_5 = ExtResource("15_x73sd")
asteroid_count = 350
spawn_radius_min = 500.0
spawn_radius_max = 6000.0
random_seed = 69

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, -0.0174179, 0.999848, 0, -0.999848, -0.0174179, 0, 243.68, -335.826)
light_color = Color(1, 0.912596, 0.841761, 1)
light_energy = 2.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="SubViewportContainer/SubViewport"]
environment = SubResource("Environment_e0213")

[connection signal="body_entered" from="SubViewportContainer/SubViewport/World/ring/Area3D" to="SubViewportContainer/SubViewport/World/ring" method="_on_area_3d_body_entered"]
