[gd_scene load_steps=28 format=3 uid="uid://cl1lyeabmrdst"]

[ext_resource type="Script" path="res://scenes/vehicles/starships/demo-ship-2/demo_ship_2.gd" id="1_gtrcu"]
[ext_resource type="PackedScene" uid="uid://ci6pe2jfbwwi1" path="res://scenes/vehicles/starships/demo-ship-2/fighter_gen_7_model.tscn" id="2_qgepc"]
[ext_resource type="Script" path="res://resources/classes/vehicle/starship/StarshipInfo.gd" id="2_wijyj"]
[ext_resource type="Script" path="res://resources/classes/vehicle/starship/ThrusterForceResource.gd" id="3_dqaga"]
[ext_resource type="ArrayMesh" uid="uid://0evsbkipsbqe" path="res://scenes/vehicles/starships/demo-ship-2/fighterGen7-CollisionMesh.obj" id="4_en1wd"]
[ext_resource type="Script" path="res://classes/pid-controller/PIDController.gd" id="7_3qamo"]
[ext_resource type="PackedScene" uid="uid://bocuwsyrmf57u" path="res://classes/player/anchor/Anchor.tscn" id="12_2ad4s"]
[ext_resource type="PackedScene" uid="uid://q7qxuwsn55b5" path="res://scenes/interactable/control-seat/DemoControlSeat.tscn" id="12_17fxx"]
[ext_resource type="PackedScene" uid="uid://c0uh2hkiwvx7l" path="res://scenes/vehicles/starships/demo-ship-2/ShipUi.tscn" id="12_nqfhp"]
[ext_resource type="PackedScene" uid="uid://7fnvfm6w6or3" path="res://scenes/vehicles/starships/demo-ship-2/explosion.tscn" id="12_ti0ut"]
[ext_resource type="Texture2D" uid="uid://ddpa36y8mkpiy" path="res://scenes/vehicles/starships/demo-ship-2/Crosshair/crosshair.png" id="13_cebqm"]
[ext_resource type="PackedScene" uid="uid://brkik5oaep1vf" path="res://scenes/interactable/interaction-button/InteractionButton.tscn" id="13_ejv10"]
[ext_resource type="Script" path="res://classes/module/module-slot/dynamic-module-slot/hardpoint/Hardpoint.gd" id="14_318nd"]
[ext_resource type="PackedScene" uid="uid://dan83b5qrkhdv" path="res://scenes/vehicles/starships/demo-ship-2/MainParticleFX.tscn" id="14_iaa76"]
[ext_resource type="PackedScene" uid="uid://cxg4i130ut4lm" path="res://scenes/vehicles/starships/demo-ship-2/SmokeFX.tscn" id="15_71jb7"]
[ext_resource type="PackedScene" uid="uid://dlrhe21mi8cl2" path="res://scenes/modules/demo-weapon/DemoWeapon.tscn" id="15_n2il0"]
[ext_resource type="FontFile" uid="uid://bm53fppaujf5v" path="res://ui/font/Pixeled.ttf" id="17_o8bky"]

[sub_resource type="Resource" id="Resource_8x1bo"]
script = ExtResource("2_wijyj")
max_linear_velocity = 200.0
max_boost_linear_velocity = 350.0
max_angular_pitch_velocity = 0.9
max_angular_yaw_velocity = 0.9
max_angular_roll_velocity = 2.0
manufacturer = "Protectorate Federation"
model_name = "7th Generation Fighter"
release_year = "180"

[sub_resource type="Resource" id="Resource_4ayql"]
script = ExtResource("3_dqaga")
boost_multiplier = 1.5
forward_thrust = 200000.0
backward_thrust = 200000.0
up_thrust = 200000.0
down_thrust = 200000.0
left_thrust = 200000.0
right_thrust = 200000.0
roll_left_thrust = 80000.0
roll_right_thrust = 80000.0
yaw_left_thrust = 80000.0
yaw_right_thrust = 80000.0
pitch_up_thrust = 80000.0
pitch_down_thrust = 80000.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_anf07"]
points = PackedVector3Array(9.16666, 4.58589, 5.79973, 2.39356, 0.462733, 0.793534, 2.39356, 1.34661, 0.793534, 2.39356, 0.462733, 4.32669, 9.16666, 3.40738, 4.03218, 2.68859, 1.64124, 4.32669, 8.5766, 4.58589, 4.03218, 8.5766, 3.11316, 5.79973, 5.04419, 1.34661, 1.97158, 7.98786, 4.29126, 5.79973, 2.98296, 0.462733, 4.32669, 8.87096, 4.29126, 3.73766, 2.68859, 1.64124, 1.08805, 2.68859, 0.462733, 0.793534, 5.04419, 1.34661, 4.6212, 2.39356, 1.34661, 4.32669, 9.16666, 3.40738, 5.79973, 7.98786, 3.11316, 5.79973, 9.16666, 4.58589, 4.03218, 7.69349, 2.81853, 3.14962, 2.68859, 1.34661, 0.793534, 2.98296, 0.462733, 1.08805, 8.5766, 4.58589, 5.79973, 6.221, 1.93546, 5.21022, 8.87096, 3.40738, 3.73766, 7.69349, 3.70201, 3.14962)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_filri"]
points = PackedVector3Array(3.86606, -2.18853, 1.67692, 2.68859, -0.126289, 4.03235, 3.27733, -0.421204, 4.32683, 9.16666, -3.36559, 4.03235, 8.5766, -4.54396, 5.21071, 2.68859, -0.126289, 0.793044, 2.68859, -1.59913, 4.32683, 9.16666, -4.54396, 4.03235, 9.16666, -3.36559, 5.21071, 2.39356, -1.30465, 0.793044, 7.98786, -3.07111, 5.21071, 2.39356, -0.126289, 4.03235, 8.5766, -4.54396, 4.03235, 2.68859, -1.30465, 0.793044, 2.39356, -0.126289, 0.793044, 2.39356, -1.30465, 4.03235, 9.16666, -4.54396, 5.21071, 2.68859, -0.421204, 4.32683, 7.98786, -4.24904, 5.21071, 2.68859, -1.59913, 1.08796, 8.5766, -3.07111, 5.21071)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_nb6dy"]
points = PackedVector3Array(2.3929, 1.34609, 4.0318, 2.3929, -1.30428, 4.0318, 0.920114, 0.168943, -7.15876, -2.02454, 1.64066, 6.97706, -2.02454, -1.59884, 6.38801, -0.846492, -1.00933, -7.15876, 2.09816, 0.462387, 7.27229, -0.9284, 1.88456, 1.38365, 1.21486, -1.30428, -5.3916, 1.21486, 2.2298, 3.44275, -1.43551, 0.756956, -4.2135, 2.09816, -1.59884, 6.38801, 2.3929, 1.34609, 0.792727, -2.31928, -1.30428, 4.32703, 2.09816, 1.34609, 7.27229, -2.31928, 1.34609, 4.32703, 2.3929, -1.30428, 0.792727, -1.14077, -1.30428, -5.3916, -0.846492, 0.462387, -6.27447, 0.920114, 0.462387, -6.27447, -1.73026, 1.05152, -2.15112, 0.920114, -1.00933, -7.15876, 1.21486, 1.64066, 6.97706, -0.846492, 0.168943, -7.15876, -1.14077, -1.00933, -5.98065, 2.09816, -1.59884, 5.79895, -2.02454, -1.59884, 6.09419, -1.14077, 0.462387, -5.98065, -2.02454, 1.64066, 6.09419, -0.9284, 1.88456, 2.8321)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_0otas"]
points = PackedVector3Array(-6.14677, 1.93546, 2.56028, -8.79806, 4.58589, 5.21071, -7.91453, 4.29126, 5.21071, -2.31928, 1.64124, 1.08756, -2.61402, 0.462733, 4.62146, -2.31928, 1.64124, 4.32683, -9.0928, 3.40738, 5.21071, -9.38754, 4.58589, 3.73798, -2.90876, 0.462733, 1.08756, -9.38754, 3.70201, 3.73798, -7.91453, 4.29126, 3.44336, -2.31928, 0.462733, 1.08756, -2.90876, 0.462733, 4.62146, -2.90876, 1.64124, 1.08756, -7.03099, 3.70201, 5.21071, -7.91453, 2.81853, 5.21071, -2.61402, 1.64124, 4.62146, -2.31928, 0.462733, 4.32683, -7.32574, 2.52431, 2.85491, -9.38754, 3.70201, 5.21071, -7.32574, 3.70201, 2.85491, -6.14677, 1.93546, 4.91608, -9.0928, 3.40738, 3.73798, -8.79806, 4.58589, 3.73798, -6.14677, 3.40738, 2.56028, -8.79806, 4.29126, 3.44336, -9.10214, 4.4194, 5.04422)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_xw1k0"]
points = PackedVector3Array(-5.85364, -1.89361, 5.21022, -2.61405, -1.30465, 0.793534, -5.26482, -2.48171, 1.97158, -3.20287, -1.89361, 4.6212, -9.09179, -4.54396, 5.79973, -9.68206, -3.36559, 4.03218, -2.61405, -0.126289, 0.793534, -2.61405, -0.126289, 4.32669, -9.09179, -4.54396, 4.03218, -9.68206, -3.36559, 5.79973, -2.61405, -1.59913, 1.08805, -2.31928, -1.30465, 4.32669, -9.68206, -4.54396, 4.03218, -2.31928, -0.126289, 0.793534, -2.31928, -0.126289, 4.32669, -7.03056, -3.66008, 3.14962, -8.50369, -3.36559, 5.79973, -2.31928, -1.30465, 0.793534, -9.68206, -4.54396, 5.79973, -3.79313, -2.18853, 4.6212, -8.50369, -4.24904, 5.79973, -8.50369, -3.07111, 3.44315, -3.79313, -2.18853, 1.67707, -7.03056, -3.66008, 5.21022, -3.20287, -0.715686, 4.6212, -7.61938, -2.48171, 5.50473, -2.61405, -1.59913, 4.32669, -8.50369, -3.95456, 3.44315)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_3ywro"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("MainParticleFX:amount_ratio")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MainParticleFX/SmokeFX:amount_ratio")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("Explosion:emitting")
properties/4/spawn = true
properties/4/replication_mode = 1

[sub_resource type="BoxMesh" id="BoxMesh_8qbes"]
size = Vector3(0.1, 0.105, 0.1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4ppsa"]
albedo_color = Color(0, 1, 0, 1)
emission_enabled = true
emission = Color(0, 1, 0, 1)

[node name="DemoShip2" type="RigidBody3D" node_paths=PackedStringArray("hardpoint_1", "hardpoint_2", "hardpoint_3", "hardpoint_4", "explosion", "thruster", "thruster2", "respawn_timer", "anchor")]
collision_layer = 515
collision_mask = 513
mass = 1200.0
script = ExtResource("1_gtrcu")
max_heat = 350.0
heat = 30.0
ship_info = SubResource("Resource_8x1bo")
thruster_force = SubResource("Resource_4ayql")
hardpoint_1 = NodePath("Hardpoint")
hardpoint_2 = NodePath("Hardpoint2")
hardpoint_3 = NodePath("Hardpoint3")
hardpoint_4 = NodePath("Hardpoint4")
explosion = NodePath("Explosion")
thruster = NodePath("MainParticleFX")
thruster2 = NodePath("MainParticleFX/SmokeFX")
respawn_timer = NodePath("Timer")
controller_reference = "res://classes/controller/vehicle-controller/starship-controller/StarshipController.tscn"
anchor = NodePath("DemoControlSeat/Anchor")

[node name="fighterGen7" parent="." instance=ExtResource("2_qgepc")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Seat" parent="fighterGen7/Hull/Cockpit" index="1"]
visible = false

[node name="Gunpod" parent="fighterGen7" index="1"]
visible = false

[node name="Gunpod_001" parent="fighterGen7" index="2"]
visible = false

[node name="Gunpod_002" parent="fighterGen7" index="3"]
visible = false

[node name="Gunpod_003" parent="fighterGen7" index="4"]
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = ExtResource("4_en1wd")

[node name="CollisionShape3D5" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_anf07")

[node name="CollisionShape3D4" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_filri")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_nb6dy")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_0otas")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_xw1k0")

[node name="PIDControllers" type="Node" parent="."]

[node name="PIDForward" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDBackward" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDUp" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDDown" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDLeft" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDRight" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 40000.0
Ki = 0.2
Kd = 0.01
use_absolute_error = true

[node name="PIDRollLeft" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="PIDRollRight" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="PIDYawLeft" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="PIDYawRight" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="PIDPitchUp" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="PIDPitchDown" type="Node" parent="PIDControllers"]
script = ExtResource("7_3qamo")
Kp = 250000.0
Ki = 0.2
Kd = 0.05
use_absolute_error = true

[node name="Anchor" parent="." instance=ExtResource("12_2ad4s")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 1.33571, -1.95017)

[node name="DemoControlSeat" parent="." node_paths=PackedStringArray("target_control_entity") instance=ExtResource("12_17fxx")]
transform = Transform3D(-1, 0, 1.22465e-16, 0, 1, 0, -1.22465e-16, 0, -1, 0, 1.13241, -0.796841)
target_control_entity = NodePath("..")

[node name="Anchor" parent="DemoControlSeat" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.07522e-17, 0.109506, 0.87924)

[node name="Marker3D" parent="DemoControlSeat" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.16777, -1.22166, -2.38015)

[node name="InteractionButton" parent="." instance=ExtResource("13_ejv10")]
transform = Transform3D(-0.239982, 0, -99.3896, 0, 29.16, 0, 87.0247, 0, -0.27408, -1.4023, -2.00205, 0.463093)

[node name="MeshInstance3D" parent="InteractionButton" index="0"]
transform = Transform3D(1, 0, 1.30104e-18, 0, 1, 0, -1.30104e-18, 0, 1, -7.77602e-05, 0.0148623, -0.0281982)
visible = false

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_3ywro")
visibility_update_mode = 1

[node name="Hardpoint" type="Node3D" parent="."]
transform = Transform3D(0.552107, 0.833591, -0.0174497, -0.833759, 0.551853, -0.0174524, -0.00491847, 0.0241845, 0.999695, 9.04008, 4.13469, -4.73846)
script = ExtResource("14_318nd")
size = 4

[node name="Hardpoint2" type="Node3D" parent="."]
transform = Transform3D(-0.552107, 0.833591, -0.0174497, -0.833759, -0.551853, 0.0174524, 0.00491847, 0.0241845, 0.999695, 9.16396, -4.01831, -4.73846)
script = ExtResource("14_318nd")
size = 4

[node name="Hardpoint3" type="Node3D" parent="."]
transform = Transform3D(-0.640246, -0.767972, 0.0174497, 0.768167, -0.640012, 0.0174524, -0.0022349, 0.0245781, 0.999695, -9.16541, -3.95228, -4.73846)
script = ExtResource("14_318nd")
size = 4

[node name="Hardpoint4" type="Node3D" parent="."]
transform = Transform3D(0.679561, -0.733411, 0.0174497, 0.733618, 0.679338, -0.0174524, 0.000945516, 0.0246614, 0.999695, -9.27001, 4.0541, -4.73846)
script = ExtResource("14_318nd")
size = 4

[node name="DemoWeapon" parent="." node_paths=PackedStringArray("module_slot") instance=ExtResource("15_n2il0")]
module_slot = NodePath("../Hardpoint")

[node name="DemoWeapon2" parent="." node_paths=PackedStringArray("module_slot") instance=ExtResource("15_n2il0")]
module_slot = NodePath("../Hardpoint2")

[node name="DemoWeapon3" parent="." node_paths=PackedStringArray("module_slot") instance=ExtResource("15_n2il0")]
module_slot = NodePath("../Hardpoint3")

[node name="DemoWeapon4" parent="." node_paths=PackedStringArray("module_slot") instance=ExtResource("15_n2il0")]
module_slot = NodePath("../Hardpoint4")

[node name="ShipUi" parent="." node_paths=PackedStringArray("starship") instance=ExtResource("12_nqfhp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.29946, 0)
starship = NodePath("..")

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 12.6292, 0)
modulate = Color(1, 0.619608, 0, 1)
pixel_size = 0.001
billboard = 1
fixed_size = true
texture = ExtResource("13_cebqm")

[node name="MainParticleFX" parent="." instance=ExtResource("14_iaa76")]
transform = Transform3D(-1.75478, 0, -0.135516, 0, 1.76, 0, 0.135516, 0, -1.75478, 0, 0, -5.73549)
amount_ratio = 0.0

[node name="SmokeFX" parent="MainParticleFX" instance=ExtResource("15_71jb7")]
transform = Transform3D(1, 0, -1.38778e-17, 0, 1, 0, 1.38778e-17, 0, 1, 0.00222167, 0, -0.0287682)
amount_ratio = 0.0

[node name="Timer" type="Timer" parent="."]
process_callback = 0
one_shot = true

[node name="Explosion" parent="." instance=ExtResource("12_ti0ut")]
lifetime = 5.0

[node name="HeatTimer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.2
autostart = true

[node name="HealingTimer" type="Timer" parent="."]
wait_time = 30.0
one_shot = true

[node name="Label3D" type="Label3D" parent="."]
transform = Transform3D(-0.998249, 0, -0.0591496, 0, 1, 0, 0.0591496, 0, -0.998249, 0, 1.53823, 0)
visible = false
text = "RETURN!"
font = ExtResource("17_o8bky")

[node name="CanHeal" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00617018, 0.582177, -0.366465)
mesh = SubResource("BoxMesh_8qbes")
surface_material_override/0 = SubResource("StandardMaterial3D_4ppsa")

[connection signal="interacted" from="InteractionButton" to="." method="_on_interaction_button_interacted"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="timeout" from="HeatTimer" to="." method="_on_heat_timer_timeout"]
[connection signal="timeout" from="HealingTimer" to="." method="_on_timer_2_timeout"]

[editable path="fighterGen7"]
[editable path="DemoControlSeat"]
[editable path="InteractionButton"]
