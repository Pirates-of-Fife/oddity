[gd_scene load_steps=11 format=3 uid="uid://bcvir7q3fa7yd"]

[sub_resource type="Gradient" id="Gradient_4bf0g"]
offsets = PackedFloat32Array(0.575342, 0.671233, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.0885598, 0.08856, 0.0885599, 1, 1, 1, 1, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_kf4en"]
noise_type = 3
frequency = 0.0538
fractal_octaves = 8
fractal_lacunarity = 2.87

[sub_resource type="NoiseTexture3D" id="NoiseTexture3D_ns8c5"]
width = 128
height = 128
color_ramp = SubResource("Gradient_4bf0g")
noise = SubResource("FastNoiseLite_kf4en")

[sub_resource type="FogMaterial" id="FogMaterial_8jigj"]
density = 0.5248
emission = Color(0.533037, 0.533037, 0.533037, 1)
density_texture = SubResource("NoiseTexture3D_ns8c5")

[sub_resource type="GDScript" id="GDScript_5mgp0"]
resource_name = "waew"
script/source = "extends FogVolume


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	(material as FogMaterial).density_texture.noise.offset.x += delta
"

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_vwjou"]

[sub_resource type="Sky" id="Sky_y0ceg"]
sky_material = SubResource("PhysicalSkyMaterial_vwjou")

[sub_resource type="Environment" id="Environment_uxck7"]
background_mode = 2
background_color = Color(0.695509, 0.378792, 0.559654, 1)
sky = SubResource("Sky_y0ceg")
ambient_light_source = 3
ambient_light_energy = 2.01
volumetric_fog_enabled = true
volumetric_fog_density = 0.0
volumetric_fog_length = 1024.0

[sub_resource type="GDScript" id="GDScript_hahll"]
script/source = "extends Camera3D

var move_speed := 60.0
var mouse_sensitivity := 0.2

var rotation_x := 0.0
var rotation_y := 0.0

func _ready() -> void:
	Input.set_mouse_mode(Input.MOUSE_MODE_CAPTURED)

func _unhandled_input(event: InputEvent) -> void:
	if event is InputEventMouseMotion:
		rotation_y -= event.relative.x * mouse_sensitivity * 0.01
		rotation_x -= event.relative.y * mouse_sensitivity * 0.01
		rotation_x = clamp(rotation_x, deg_to_rad(-89), deg_to_rad(89))
		
		rotation_degrees = Vector3(rad_to_deg(rotation_x), rad_to_deg(rotation_y), 0)

func _process(delta: float) -> void:
	var direction := Vector3.ZERO

	if Input.is_key_pressed(KEY_W):
		direction += -basis.z # Forward relative to where camera is facing
	if Input.is_key_pressed(KEY_S):
		direction += basis.z  # Backward
	if Input.is_key_pressed(KEY_A):
		direction += -basis.x # Left
	if Input.is_key_pressed(KEY_D):
		direction += basis.x  # Right
	if Input.is_key_pressed(KEY_SPACE):
		direction += basis.y  # Up
	if Input.is_key_pressed(KEY_CTRL):
		direction += -basis.y # Down

	if direction != Vector3.ZERO:
		direction = direction.normalized()
		global_translate(direction * move_speed * delta)
"

[sub_resource type="BoxMesh" id="BoxMesh_trb7w"]
size = Vector3(30, 30, 30)

[node name="Node3D" type="Node3D"]

[node name="FogVolume" type="FogVolume" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.83348, 4.54689, -16.0889)
size = Vector3(325.534, 116.674, 481.152)
material = SubResource("FogMaterial_8jigj")
script = SubResource("GDScript_5mgp0")

[node name="FogVolume" type="FogVolume" parent="FogVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 326.432, 4.54689, -16.0889)
size = Vector3(325.534, 116.674, 481.152)
material = SubResource("FogMaterial_8jigj")

[node name="FogVolume" type="FogVolume" parent="FogVolume/FogVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -644.821, 4.54689, -16.0889)
size = Vector3(325.534, 116.674, 481.152)
material = SubResource("FogMaterial_8jigj")

[node name="FogVolume" type="FogVolume" parent="FogVolume/FogVolume/FogVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 362.154, 4.54689, 438.947)
size = Vector3(1030.17, 116.674, 481.152)
material = SubResource("FogMaterial_8jigj")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_uxck7")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.437143, 26.8789, -383.136)
far = 40000.0
script = SubResource("GDScript_hahll")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.694709, -0.125905, -0.708186, 0.719291, 0.121602, 0.683983, 0, -0.984561, 0.17504, 0, -2.4274, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 103.747, 0, 0)
mesh = SubResource("BoxMesh_trb7w")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -117.131, 0, 0)
mesh = SubResource("BoxMesh_trb7w")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.9299, 0, 99.994)
mesh = SubResource("BoxMesh_trb7w")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 34.1076, 0, -130.729)
mesh = SubResource("BoxMesh_trb7w")
